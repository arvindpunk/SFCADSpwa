(this.webpackJsonpsfcadspwa=this.webpackJsonpsfcadspwa||[]).push([[0],{112:function(e,t,a){e.exports=a.p+"static/media/logo.67268839.png"},137:function(e,t,a){e.exports=a(161)},142:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),l=a.n(o),c=(a(142),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var s=a(15),u=a(16),d=a(18),m=a(17),p=a(234),g=a(229),f=a(214),h=a(210),E=a(233),v=a(213),b=a(208),y=a(235),w=a(110),S=a.n(w),O=a(75),k=(a(73),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleLogin=function(){var e,t;(null===(e=n.state)||void 0===e?void 0:e.email)&&(null===(t=n.state)||void 0===t?void 0:t.pass)&&O.auth().signInWithEmailAndPassword(n.state.email,n.state.pass).catch((function(e){n.setState({toastOpen:!0,toastMessage:e.message})}))},n.state={email:"",pass:"",toastOpen:!1,toastMessage:""},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{p:2,minHeight:"100vh",alignContent:"center"},r.a.createElement(b.a,{in:this.state.toastOpen},r.a.createElement(y.a,{severity:"error",action:r.a.createElement(h.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){e.setState({toastOpen:!1})}},r.a.createElement(S.a,{fontSize:"inherit"}))},this.state.toastMessage)),r.a.createElement(E.a,{fullWidth:!0,id:"email",label:"E-mail",margin:"normal",onChange:function(t){return e.setState({email:t.target.value})}}),r.a.createElement(E.a,{fullWidth:!0,id:"pass",type:"password",label:"Password",margin:"normal",onChange:function(t){return e.setState({pass:t.target.value})}}),r.a.createElement(p.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){return e.handleLogin()}},"Login")))}}]),a}(r.a.Component)),D=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(f.a,{item:!0,xs:12,md:4},r.a.createElement(k,null))))}}]),a}(r.a.Component),C=a(222),j=a(223),I=a(65),A=a.n(I),M=a(212),L=a(220),W=a(221),x=a(215),F=a(218),U=a(217),q=a(216),T=a(85),B=a(120),R=a(231),P=a(26),H=a(21),J=(a(95),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).db=void 0,n.componentDidMount=function(){var e,t=null===(e=H.auth().currentUser)||void 0===e?void 0:e.uid,a=new Array;t&&H.firestore().collection("requests").where("requestedBy","==",t).get().then((function(e){e.forEach((function(e){var t;a.push(null===(t=e.data())||void 0===t?void 0:t.timestamp.toDate())})),n.setState({items:a})})).catch((function(e){console.log("Error fetching documents: ",e)}))},n.handleSetDate=function(){var e;n.setState({dialogOpen:!1}),H.firestore().collection("requests").doc().set({requestedBy:null===(e=H.auth().currentUser)||void 0===e?void 0:e.uid,acceptedBy:"",timestamp:n.state.date}),n.state.date&&n.state.items.push(n.state.date)},n.renderDialog=function(){return r.a.createElement(x.a,{open:n.state.dialogOpen,onClose:function(){return n.setState({dialogOpen:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(q.a,{id:"alert-dialog-title"},"Request bot at?"),r.a.createElement(U.a,null,r.a.createElement(R.a,{margin:"normal",id:"time-picker",label:"Pick Time",value:n.state.date,onChange:function(e){return n.setState({date:e})},KeyboardButtonProps:{"aria-label":"change time"}})),r.a.createElement(F.a,null,r.a.createElement(v.a,{onClick:function(){return n.handleSetDate()},color:"primary",autoFocus:!0},"Request")))},n.getTimeStringFromDate=function(e){return(e.getHours()%13+(e.getHours()>12?1:0)).toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+" "+(e.getHours()<12?"AM":"PM")},n.getDateStringFromDate=function(e){return e.toDateString()},n.state={dialogOpen:!1,date:new Date,items:new Array},n.db=H.firestore(),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{utils:T.a},r.a.createElement(M.a,{disablePadding:!0},this.state.items.map((function(t,a){return r.a.cloneElement(r.a.createElement(B.a,{in:!0},r.a.createElement(L.a,{divider:!0,button:!0,key:a},r.a.createElement(W.a,{primary:e.getTimeStringFromDate(t),secondary:e.getDateStringFromDate(t)}))))}))),this.renderDialog(),r.a.createElement(C.a,{appear:!0,in:!0,exit:!0,timeout:300},r.a.createElement(j.a,{onClick:function(){return e.setState({dialogOpen:!0,date:new Date})},color:"secondary","aria-label":"add",style:{position:"fixed",bottom:16,right:16}},r.a.createElement(A.a,null))))}}]),a}(r.a.Component)),z=a(242),G=a(224),N=a(237),K=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).dummyData=[{label:"Robot informed!",completed:!0,active:!1},{label:"Reaching restaurant.",completed:!1,active:!0},{label:"Waiting at drop-off point!",completed:!1,active:!1},{label:"NGO has arrived.",completed:!1,active:!1},{label:"Food picked up!",completed:!1,active:!1}],n.state={value:0},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{orientation:"vertical"},this.dummyData.map((function(e,t){var a=e.label,n=e.completed,o=e.active;return r.a.cloneElement(r.a.createElement(G.a,{completed:n,active:o,key:t},r.a.createElement(N.a,null,a)))}))))}}]),a}(r.a.Component),Q=a(60),V=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,{padding:2},r.a.createElement(Q.a,{variant:"h5"},"We are expanding!"),r.a.createElement(Q.a,{color:"textSecondary"},"Enter below the location and name of shopping centre. We'll expand next to the most requested location!"),r.a.createElement("form",{noValidate:!0},r.a.createElement(p.a,null,r.a.createElement(E.a,{id:"city",label:"City",placeholder:"Eg. Ghaziabad",margin:"normal",fullWidth:!0})),r.a.createElement(p.a,null,r.a.createElement(E.a,{id:"mall",label:"Shopping Mall",placeholder:"Eg. Shipra Mall",margin:"normal",fullWidth:!0})),r.a.createElement(p.a,{display:"flex",justifyContent:"flex-end",p:2},r.a.createElement(v.a,{variant:"contained",color:"primary"},"Submit"))))}}]),a}(r.a.Component),Z=a(67),$=a(14),X=[{argument:"Wastage",value:120},{argument:"Collected",value:80},{argument:"Distributed",value:75}],Y=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,{p:2},r.a.createElement(Q.a,{variant:"h5",style:{marginBottom:10}},"May 2020 (kg)"),r.a.createElement(Z.c,{data:X},r.a.createElement(Z.a,null),r.a.createElement(Z.d,null),r.a.createElement(Z.b,{valueField:"value",argumentField:"argument",color:"#ff8855"}),r.a.createElement($.a,null)))}}]),a}(r.a.Component),_=a(225),ee=a(236),te=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).db=void 0,n.componentDidMount=function(){var e;if(null===(e=H.auth().currentUser)||void 0===e?void 0:e.uid){var t=new Array;H.firestore().collection("requests").get().then((function(e){e.forEach((function(e){var a,n,r;t.push({id:e.id,date:null===(a=e.data())||void 0===a?void 0:a.timestamp.toDate(),requestedBy:null===(n=e.data())||void 0===n?void 0:n.requestedBy,acceptedBy:null===(r=e.data())||void 0===r?void 0:r.acceptedBy})})),n.setState({items:t})})).catch((function(e){console.log("Error fetching documents: ",e)}))}},n.handleCheckboxChange=function(e,t){var a;console.log(e.target.checked);var r,o=null===(a=H.auth().currentUser)||void 0===a?void 0:a.uid;o&&(H.firestore().collection("requests").doc(null===(r=n.state.items[t])||void 0===r?void 0:r.id).update({acceptedBy:e.target.checked?o:""}),n.state.items[t].acceptedBy=e.target.checked?o:"",n.forceUpdate())},n.getTimeStringFromDate=function(e){return(e.getHours()%13+(e.getHours()>12?1:0)).toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+" "+(e.getHours()<12?"AM":"PM")},n.getDateStringFromDate=function(e){return e.toDateString()},n.state={dialogOpen:!1,date:new Date,items:new Array},n.db=H.firestore(),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{utils:T.a},r.a.createElement(M.a,{disablePadding:!0},this.state.items.map((function(t,a){var n,o,l=t.date,c=t.acceptedBy;return r.a.cloneElement(r.a.createElement(B.a,{in:!0},r.a.createElement(L.a,{divider:!0,button:!0,key:a},r.a.createElement(W.a,{primary:e.getTimeStringFromDate(l),secondary:e.getDateStringFromDate(l)}),r.a.createElement(_.a,null,r.a.createElement(ee.a,{checked:c==(null===(n=H.auth().currentUser)||void 0===n?void 0:n.uid),disabled:""!=c&&c!=(null===(o=H.auth().currentUser)||void 0===o?void 0:o.uid),onChange:function(t){return e.handleCheckboxChange(t,a)}})))))}))))}}]),a}(r.a.Component),ae=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).screenMap=new Map,n.screenMap.set("Request",r.a.createElement(J,null)),n.screenMap.set("Status",r.a.createElement(K,null)),n.screenMap.set("Add Location",r.a.createElement(V,null)),n.screenMap.set("Information",r.a.createElement(Y,null)),n.screenMap.set("Login",r.a.createElement(D,null)),n.screenMap.set("Accept",r.a.createElement(te,null)),n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.screenMap.get(this.props.screen))}}]),a}(r.a.Component),ne=a(238),re=a(240),oe=a(34),le=a(226),ce=a(227),ie=a(113),se=a.n(ie),ue=a(114),de=a.n(ue),me=a(115),pe=a.n(me),ge=a(116),fe=a.n(ge),he=a(117),Ee=a.n(he),ve=a(112),be=a.n(ve),ye=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleLogout=function(){H.auth().signOut().catch((function(e){console.log(e.code),console.log(e.message)})),e.props.setScreen("Login"),e.props.toggleDrawer(!1)},e.renderDrawerContents=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{style:{width:240},padding:2,display:"flex",alignItems:"center"},r.a.createElement(re.a,{src:be.a}),r.a.createElement(Q.a,{variant:"h5",style:{paddingLeft:16}},"SF-CADS")),r.a.createElement(le.a,null),r.a.createElement(M.a,null,"restaurant"==e.props.userType?r.a.createElement(L.a,{button:!0,key:1,disabled:!e.props.loggedIn,onClick:function(){e.props.setScreen("Request"),e.props.toggleDrawer(!1)}},r.a.createElement(ce.a,null,r.a.createElement(A.a,null)),r.a.createElement(W.a,null,"Request")):null,"ngo"==e.props.userType?r.a.createElement(L.a,{button:!0,key:2,disabled:!e.props.loggedIn,onClick:function(){e.props.setScreen("Accept"),e.props.toggleDrawer(!1)}},r.a.createElement(ce.a,null,r.a.createElement(A.a,null)),r.a.createElement(W.a,null,"Accept")):null,e.props.loggedIn?r.a.createElement(L.a,{button:!0,key:3,onClick:function(){e.props.setScreen("Status"),e.props.toggleDrawer(!1)}},r.a.createElement(ce.a,null,r.a.createElement(se.a,null)),r.a.createElement(W.a,null,"Status")):null,r.a.createElement(L.a,{button:!0,key:4,onClick:function(){e.props.setScreen("Add Location"),e.props.toggleDrawer(!1)}},r.a.createElement(ce.a,null,r.a.createElement(de.a,null)),r.a.createElement(W.a,null,"Add Location")),r.a.createElement(L.a,{button:!0,key:5,onClick:function(){e.props.setScreen("Information"),e.props.toggleDrawer(!1)}},r.a.createElement(ce.a,null,r.a.createElement(pe.a,null)),r.a.createElement(W.a,null,"Information")),r.a.createElement(le.a,null),e.props.loggedIn?r.a.createElement(L.a,{divider:!0,button:!0,key:"6",onClick:function(){return e.handleLogout()}},r.a.createElement(ce.a,null,r.a.createElement(fe.a,null)),r.a.createElement(W.a,null,"Logout")):r.a.createElement(L.a,{divider:!0,button:!0,key:"7",disabled:"Login"==e.props.screen,onClick:function(){e.props.setScreen("Login"),e.props.toggleDrawer(!1)}},r.a.createElement(ce.a,null,r.a.createElement(Ee.a,null)),r.a.createElement(W.a,null,"Login"))))},e.renderSwipeableDrawer=function(){return r.a.createElement(ne.a,{open:e.props.open,onOpen:function(){return e.props.toggleDrawer(!0)},onClose:function(){return e.props.toggleDrawer(!1)}},e.renderDrawerContents())},e.renderPermanentDrawer=function(){return r.a.createElement(oe.a,{variant:"permanent"},e.renderDrawerContents())},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderSwipeableDrawer())}}]),a}(r.a.Component),we=a(228),Se=a(219),Oe=a(118),ke=a.n(Oe),De=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(we.a,{position:"sticky"},r.a.createElement(Se.a,null,r.a.createElement(h.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return e.props.toggleDrawer(!0)}},r.a.createElement(ke.a,null)),r.a.createElement(Q.a,{variant:"h6"},this.props.title)))}}]),a}(r.a.Component),Ce=a(230),je=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.handleLogin()},n.setUserType=function(e){var t=H.auth().currentUser;t?H.firestore().collection("users").doc(t.uid).set({type:e}).then((function(){console.log("Document successfully written!"),"ngo"===e?n.setState({screen:"Accept",loggedIn:!0}):"restaurant"===e?n.setState({screen:"Request",loggedIn:!0}):console.error("Invalid choice.")})).catch((function(e){console.error("Error writing document: ",e)})):console.log("Some error occured.");n.setState({dialogOpen:!1})},n.handleLogin=function(){H.auth().onAuthStateChanged((function(e){e?H.firestore().collection("users").doc(e.uid).get().then((function(e){var t,a;e.exists?"restaurant"===(null===(t=e.data())||void 0===t?void 0:t.type)?n.setState({userType:"restaurant",screen:"Request",loggedIn:!0}):"ngo"===(null===(a=e.data())||void 0===a?void 0:a.type)?n.setState({userType:"ngo",screen:"Accept",loggedIn:!0}):console.log("Invalid data error."):n.setState({dialogOpen:!0})})).catch((function(e){console.log("Error fetching document: "+e)})):n.setState({screen:"Login",loggedIn:!1})}))},n.toggleDrawer=function(e){n.setState({open:e})},n.setScreen=function(e){n.setState({screen:e})},n.setLoggedIn=function(e){n.setState({loggedIn:e})},n.state={loggedIn:null!=H.auth().currentUser,open:!1,screen:"Login",type:"",dialogOpen:!1,userType:""},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{bgcolor:"#dddddd",minHeight:"100vh"},r.a.createElement(De,{title:this.state.screen,toggleDrawer:this.toggleDrawer}),r.a.createElement(ye,{screen:this.state.screen,open:this.state.open,toggleDrawer:this.toggleDrawer,setScreen:this.setScreen,loggedIn:this.state.loggedIn,userType:this.state.userType}),r.a.createElement(g.a,{maxWidth:"md",style:{padding:0}},r.a.createElement(p.a,{bgcolor:"#ffffff",boxShadow:3},r.a.createElement(ae,{screen:this.state.screen}))),r.a.createElement(x.a,{open:this.state.dialogOpen,onClose:function(){return e.setState({dialogOpen:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0},r.a.createElement(q.a,{id:"alert-dialog-title"},"First time login detected!"),r.a.createElement(U.a,null,r.a.createElement(Ce.a,null,"Choose which type of account you want. (This cannot be changed at a later stage)")),r.a.createElement(F.a,null,r.a.createElement(v.a,{fullWidth:!0,onClick:function(){return e.setUserType("ngo")},color:"secondary"},"Ngo"),r.a.createElement(v.a,{fullWidth:!0,onClick:function(){return e.setUserType("restaurant")},color:"primary"},"Restaurant"))))}}]),a}(r.a.Component),Ie={apiKey:"AIzaSyAW4UfRsC3q1LEJpAxUH8GZqUBJWQ5pJtk",authDomain:"sf-cads.firebaseapp.com",databaseURL:"https://sf-cads.firebaseio.com",projectId:"sf-cads",storageBucket:"sf-cads.appspot.com",messagingSenderId:"421853704272",appId:"1:421853704272:web:53ffcd1309a482924a2155",measurementId:"G-QVPE9JGSJ5"},Ae=function(){O.initializeApp(Ie)};l.a.render(r.a.createElement(r.a.StrictMode,null,Ae(),r.a.createElement(je,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/www.sfcads.cf",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/www.sfcads.cf","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(t,e)}))}}()}},[[137,1,2]]]);
//# sourceMappingURL=main.975ff2ff.chunk.js.map